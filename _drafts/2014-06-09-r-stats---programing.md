---
layout: post
title: "R Statistics - 基础编程"
description: ""
category: R
tags: []
---
{% include JB/setup %}

R 代码的本质是一系列的表达式（expressions，我们 C 体系语言中我们称之为语句（Statements））。表达式中包含对象（objects）和函数（functions），它们之间有换行符或者分号隔开。R 语言是一个面向对象的编程语言，这个意味着你在 R 处理的任何东西都是一个对象，有一个类型，并归属于某一个类（class）；就连函数本身也是一个对象：

	> height <- c(58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72) 
	> class(height)	[1] "numeric"	> mean(height)	[1] 65	> class(mean) 
	[1] "function"
	
### 变量和函数

R 的赋值操作非常有趣，因为语言提供了一个非常不一样的赋值符号。`<-` 作为 R 的常规赋值操作符，并且可以在任何地方使用它；你也可以使用 `->`，但是注意箭头指向的是变量：

	x <- 1    # 等同于    1 -> x
和其他语言一样， 号（`=`）等可以完成与赋值箭头 （assignment arrow）相同的功能，但是只能用于最高层次范围，不能用于嵌套的表达式。 如果拿不准，那么使用箭头更安全，举个例子：
	> mean(x = 1:10)	[1] 5.5	> x	Error: object 'x' not found
这时，`x` 仅在 `mean()` 函数中生效。所以，使用 `<-` 赋值的好处就是，`x` 可以在整个 workspace 中可见：
	> mean(x <- 1:10) 	[1] 5.5	> x    [1]  1  2  3  4  5  6  7  8  9 10
接着，我们讲 R 函数，前面提到 R 函数本身也是一个对象。R 中所有的工作都是由函数完成的，即便是赋值，循环，条件从句等等。为了证明这一点，让我们写一些简单的表达式：
	> a <- 1 
	> a + 1 
	[1] 2
	
加操作实际上是一个函数，这个意味这你可以像函数一样去调用它：

	> `+`(a,1)	[1] 
在上一个例子中，我们为了求值使用反引号（`）来包围它。当然，我们一般不这样做；我们只是为了证明一切皆函数的概念。看看如何创建一个函数：
	my_function <- function(x,y) { 		x + y	}

函数体不是一定要换行；如果你的函数体只有一个表达式，那花括号都是必须的。一旦你的函数被创建，你就可以使用它：

	> my_function(1,2) 
    [1] 3
    
你还可以为函数设置默认参数，你只需要这么做：

	my_function <- function(x,y=5) { 
		x+ y	}

为了返回一个值，你可以使用 `return`。如果你不使用它，R 就会将函数体的最后一个表达式的值作为它的返回值，这点和 Ruby 是一样的。

值得注意的一点就是，因为函数也是对象，所以你可以传递一个函数作为另一函数的参数：

	> l <- c(1,2,3,4,5)	> sapply(l, my_function) 
    [1] 6 7 8 9 10上面的例子，我们使用了 `sapply` 函数，它接受一个列表和一个函数作为参数，然后将每一个函数应用到列表的每一个函数中，并返回它（如果你熟悉 Ruby或Python 的话，它类似与 map 函数）